import{_ as s,c as i,o as a,a5 as n}from"./chunks/framework.DhMiq51s.js";const g=JSON.parse('{"title":"Linux crontab 命令","description":"crontab 命令用于管理周期性任务的表格，这些任务可按照用户指定的时间间隔执行，通常用于自动执行系统维护、日常任务或其他常规操作。","frontmatter":{"title":"Linux crontab 命令","head":[["meta",{"property":"og:title","content":"Linux crontab 命令"}],["meta",{"name":"description","content":"crontab 命令用于管理周期性任务的表格，这些任务可按照用户指定的时间间隔执行，通常用于自动执行系统维护、日常任务或其他常规操作。"}],["meta",{"name":"keywords","content":"scp"}],["meta",{"property":"og:description","content":"crontab 命令用于管理周期性任务的表格，这些任务可按照用户指定的时间间隔执行，通常用于自动执行系统维护、日常任务或其他常规操作。"}],["meta",{"property":"og:url","content":"https://sooloe.com/vientiane/crontab"}],["link",{"rel":"canonical","href":"https://sooloe.com/vientiane/crontab"}]]},"headers":[],"relativePath":"vientiane/crontab.md","filePath":"vientiane/crontab.md"}'),t={name:"vientiane/crontab.md"},l=n(`<h1 id="crontab" tabindex="-1">crontab <a class="header-anchor" href="#crontab" aria-label="Permalink to &quot;crontab&quot;">​</a></h1><p><strong>crontab</strong> 命令用于管理周期性任务的表格，这些任务可按照用户指定的时间间隔执行，通常用于自动执行系统维护、日常任务或其他常规操作。</p><h2 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-label="Permalink to &quot;语法&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> -r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span></span></code></pre></div><p><strong>file</strong> 指的是待执行任务的 <strong>crontab</strong> 文件。</p><h2 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-label="Permalink to &quot;选项&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-e:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 编辑该用户的任务表格,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果表格不存在,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 则创建一个新的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-l:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 列出该用户的所有任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-r:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 删除该用户的任务表格</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-u</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;用户名称&gt;: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">指定要编辑,列出,删除的用户的</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crontab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 表格</span></span></code></pre></div><h2 id="系统任务调度" tabindex="-1">系统任务调度 <a class="header-anchor" href="#系统任务调度" aria-label="Permalink to &quot;系统任务调度&quot;">​</a></h2><p>系统任务调度的配置文件：<strong>/etc/crontab</strong>, 文件内容解读如下</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定要使用的 shell</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SHELL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定系统执行命令的路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/sbin:/bin:/usr/sbin:/usr/bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定将执行信息发送电子邮件给用户，值为空表示不发送</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MAILTO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># cron 表达式说明</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .---------------- 分钟: 0 - 59</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># |  .------------- 小时: 0 - 23</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># |  |  .---------- 天数: 1 - 31</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># |  |  |  .------- 月份: 1 - 12 或者 jan,feb,mar,apr ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># |  |  |  |  .---- 星期: 0 - 7 (Sunday=0 or 7) 或者 sun,mon,tue,wed,thu,fri,sat</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># |  |  |  |  |</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># *  *  *  *  * 用户名 待执行的命令</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/15 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> root command</span></span></code></pre></div><h2 id="用户任务调度" tabindex="-1">用户任务调度 <a class="header-anchor" href="#用户任务调度" aria-label="Permalink to &quot;用户任务调度&quot;">​</a></h2><p>用户任务调度配置文件: <strong>/var/spool/cron/</strong> 目录下，文件名和用户名一致，表达是格式同系统任务调度，只是少了用户。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/cron.deny</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     该文件中所列用户不允许使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crontab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 命令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/cron.allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    该文件中所列用户允许使用</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> **</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">crontab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 命令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/spool/cron/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   所有用户</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crontab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 文件存放的目录,以用户名命名</span></span></code></pre></div><h2 id="cron-表达式符号" tabindex="-1">cron 表达式符号 <a class="header-anchor" href="#cron-表达式符号" aria-label="Permalink to &quot;cron 表达式符号&quot;">​</a></h2><p>星号<code>[*]</code>: 代表所有可能的值, 例如month字段如果是星号, 则表示在满足其它字段的制约条件后每月都执行该命令操作</p><p>逗号<code>[,]</code>: 可以用逗号隔开的值指定一个列表范围, 例如: 1,3,5,7,9</p><p>中杠<code>[-]</code>: 可以用整数之间的中杠表示一个整数范围, 例如: 2-6 表示 2,3,4,5,6</p><p>正斜线<code>[/]</code>: 可以用正斜线指定时间的间隔频率, 例如: 0-23/5 表示每 5 小时执行一次, 同时正斜线可以和星号一起使用, 例如: <code>*/10</code>, 如果用在 minute 字段, 表示每十分钟执行一次</p><h2 id="crond-服务" tabindex="-1">crond 服务 <a class="header-anchor" href="#crond-服务" aria-label="Permalink to &quot;crond 服务&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/sbin/service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭服务    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/sbin/service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启服务  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/sbin/service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重新载入配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/sbin/service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看服务状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/sbin/service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开机自启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -level</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 35</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span></span></code></pre></div>`,20),h=[l];function p(e,k,r,d,c,o){return a(),i("div",null,h)}const y=s(t,[["render",p]]);export{g as __pageData,y as default};
